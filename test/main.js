(()=>{"use strict";function t(t){const e=t.trim().split(/\n\s*\n/).map(((t,e)=>{const n=t.trim().split(/\n/),[i,r]=n[1].split(" --\x3e "),s=[i.replace(",","."),r.replace(",",".")],o=n.slice(2).join("\n");return`${e+1}\n${s[0]},${s[1]}\n${o}\n`}));return e.join("")}const e=function(e){this.script={},this.timeline=[],this.filename="",this.container=e,window.srtToSbv=t};(e.prototype={}).constructor=e,e.prototype.setContainer=function(t){this.container=t},e.prototype.updateCaptions=function(t,e=!0,n=!0){let i="";if(!e)return this.container.style.opacity=0,!1;let r=this.timeline.find((e=>e.startS<=t&&e.endS>=t));void 0!==r?(r.content.forEach(((t,e)=>{i+=t,e<r.content.length-1&&(i+="<br>")})),i!=this.container.innerHTML&&(this.container.innerHTML="",this.container.innerHTML=i),this.container.style.opacity=n?1:0):(this.container.innerHTML="",this.container.style.opacity=0)},e.prototype.checkNextDescriptionTime=function(t){let e=t.getCurrentTime(),n=Math.floor(sbvCaptions.timeline.find((t=>t.startS>=e&&t.endS>=e)).startS-e);n>6&&null!=typeof StatusVO&&StatusVO.update(`audio description starting in ${n} seconds`)},e.prototype.convertTimetoMs=function(t){if(""==t||void 0===t)return console.log("nothing to convert..."),"";let e=t.split(":"),n=parseInt(e[0]),i=parseInt(e[1]),r=parseInt(e[2].split(".")[0]);return(parseInt(e[2].split(".")[1])+1e3*r+60*i*1e3+60*n*60*1e3)/1e3},e.prototype.splitCaptions=function(t){function e(t){if(""==t||void 0===t)return"";let e=t.split(":"),n=parseInt(e[0]),i=parseInt(e[1]),r=parseInt(e[2].split(".")[0]);return(parseInt(e[2].split(".")[1])+1e3*r+60*i*1e3+60*n*60*1e3)/1e3}let n=[];return t.forEach(((t,i)=>{if(""==t)return;let r={start:t.split("\n")[0].split(",")[0],end:t.split("\n")[0].split(",")[1],content:t.split("\n").slice(1)};r.startS=e(r.start),r.endS=e(r.end),n.push(r)}),this),n},e.prototype.requestListener=function(){if(!this.captionTarget)return window.textOutput=this.responseText,!1;this.captionTarget.script.events=this.responseText.split("\n\n"),this.captionTarget.timeline=this.captionTarget.splitCaptions(this.captionTarget.script.events,this.captionTarget)},e.prototype.requestError=function(t){console.error("Fetch Error",t)},e.prototype.loadCaptions=function(t){this.filename=t;var e=new XMLHttpRequest;e.captionTarget=this,e.onload=this.requestListener,e.onerror=this.requestError,e.open("get",`./${this.filename}`,!0),e.send()};const n=e;window.syncCC=new n(document.querySelector("#captions_div"))})();